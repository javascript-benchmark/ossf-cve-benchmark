# contrib/tools/codeql 

This directory contains the driver for running the
[`codeql`](https://github.com/github/codeql) analysis tool.

## Installation

To make use of this driver, you need `codeql` and its query packs on
the local machine. This can be achieved with
[installers/install.sh](./installers/install.sh) which simply
downloads and extracts the latest public `codeql` bundle.

## Configuration

To make use of the local `codeql`, add a tools entry in the config file 
as instructed by the install script above. 

```json
{
  ...
  "tools": {
    ...

    "codeql-default": {
      "bin": "node",
      "args": [
      "/home/user-name/ossf-cve-benchmark/build/ts/contrib/tools/codeql/src/codeql.js",
      ],
      "options": {
        "codeql": "/home/user-name/analysis-tools/codeql-default/codeql/codeql"
      }
    },
    ...
  }
  ...
}
```

This will allow you to use the tool-id `codeql-default` in `cli/bin run
--tool codeql-default`.

## Supported versions

[codeql.ts](src/codeql.ts) has been tested with all releases
at https://github.com/github/codeql-action/releases until
[codeql-bundle-20201127](https://github.com/github/codeql-action/tree/codeql-bundle-20201127):
