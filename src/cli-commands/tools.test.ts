import tools from "./tools";

describe("cli-command: tools", () => {
  describe("Error cases", () => {
    test("Throws on empty files", () => {
      expect.assertions(1);
      expect(tools(undefined)).rejects.toBeTruthy();
    });
  });

  describe("Ordinary cases", () => {
    beforeEach(() => {
      console.log = jest.fn();
      expect.assertions(1);
    });
    test("Works with empty config", () => tools({}));
    test("Works with no tools", () => tools({ tools: {} }));
    test("Works with one tools", () =>
      tools({ tools: { tool_A: { bin: undefined, args: [] } } }));
    test("Works two tools", () =>
      tools({
        tools: {
          tool_A: { bin: undefined, args: [] },
          tool_B: { bin: undefined, args: [] }
        }
      }));
    afterEach(() => expect(console.log).toBeCalled());
  });
});
